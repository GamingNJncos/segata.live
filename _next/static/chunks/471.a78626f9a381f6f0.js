(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[471],{2471:function(e,t,a){"use strict";a.r(t),a.d(t,{TVOverlay:function(){return i}});var n=a(5893),l=a(7294),r=a(2075),c=a.n(r);let s=[{id:"ch3",label:"CH 3"},{id:"ch4",label:"CH 4"},{id:"av",label:"AV"}],i=e=>{let{onReachAV:t,onLeaveAV:a,cycleChannelRef:r}=e,[i,u]=l.useState(0),[d,v]=l.useState(!0),[_,o]=l.useState(!1),h=l.useRef(null),f=l.useRef(null),m=l.useRef(null),T=s[i],y="av"!==T.id,b=l.useCallback(()=>{o(!0),setTimeout(()=>{u(e=>{let t=(e+1)%s.length;return t}),o(!1),v(!0),m.current&&clearTimeout(m.current),m.current=window.setTimeout(()=>{v(!1)},2500)},80)},[]);return l.useEffect(()=>{r&&(r.current=b)},[b,r]),l.useEffect(()=>{"av"===T.id?t():a()},[T.id,t,a]),l.useEffect(()=>{let e=e=>{"Space"===e.code&&y&&(e.preventDefault(),b()),"Escape"===e.code&&(u(s.length-1),v(!0),m.current&&clearTimeout(m.current),m.current=window.setTimeout(()=>{v(!1)},2500))};return document.addEventListener("keydown",e),()=>document.removeEventListener("keydown",e)},[b,y]),l.useEffect(()=>{let e=h.current;if(!e||!y){f.current&&(cancelAnimationFrame(f.current),f.current=null);return}let t=e.getContext("2d");if(!t)return;e.width=200,e.height=150;let a=t.createImageData(e.width,e.height),n=a.data,l=()=>{for(let e=0;e<n.length;e+=4){let t=255*Math.random();n[e]=t,n[e+1]=t,n[e+2]=t,n[e+3]=255}t.putImageData(a,0,0),f.current=requestAnimationFrame(l)};return l(),()=>{f.current&&(cancelAnimationFrame(f.current),f.current=null)}},[y]),l.useEffect(()=>(m.current=window.setTimeout(()=>{v(!1)},2500),()=>{m.current&&clearTimeout(m.current)}),[]),(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"".concat(c().overlay," ").concat(y?c().visible:c().hidden),onClick:b,children:[(0,n.jsx)("canvas",{ref:h,className:c().staticCanvas}),(0,n.jsx)("div",{className:c().scanlines}),(0,n.jsx)("div",{className:c().vignette}),_&&(0,n.jsx)("div",{className:c().flash})]}),d&&(0,n.jsx)("div",{className:c().channelLabel,children:(0,n.jsx)("span",{className:c().channelText,children:T.label})}),y&&(0,n.jsx)("button",{className:c().invisibleCycleButton,onClick:b,"aria-label":"Change channel",type:"button"})]})};t.default=i},2075:function(e){e.exports={overlay:"TVOverlay_overlay__a8RQ0",visible:"TVOverlay_visible__XvdIN",hidden:"TVOverlay_hidden__Nwp77",staticCanvas:"TVOverlay_staticCanvas__Ugt_k",scanlines:"TVOverlay_scanlines__lV0Gn",vignette:"TVOverlay_vignette__flRyh",flash:"TVOverlay_flash__azlVH",flashAnim:"TVOverlay_flashAnim__aCTVZ",channelLabel:"TVOverlay_channelLabel__gKxVC",labelFadeIn:"TVOverlay_labelFadeIn__8ZBJS",channelText:"TVOverlay_channelText__rkPod",invisibleCycleButton:"TVOverlay_invisibleCycleButton___jW9R"}}}]);