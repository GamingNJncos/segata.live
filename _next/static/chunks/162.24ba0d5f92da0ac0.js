(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[162],{9162:function(t,e,r){"use strict";r.r(e),r.d(e,{FileReaderUI:function(){return b},default:function(){return _}});var n=r(5893),a=r(7294),l=r(6696),i=r(8820),s=r(1535),c=r(999),o=r.n(c),d=r(7628),u=r.n(d),p=r(5934);async function y(t){let{extensions:e,allowDirectory:r}=t;return new Promise(t=>{let n=document.createElement("input");e&&n.setAttribute("accept",e),n.type="file",n.multiple=!0,n.webkitdirectory=r,n.directory=r,n.mozdirectory=r,n.addEventListener("change",e=>{t(e.target.files),document.body.removeChild(n)}),document.body.appendChild(n),n.click()})}let h=t=>"string"==typeof t&&t.length;async function j(t){let e,r={};try{r=await new Promise((e,r)=>{u().read(t,{onSuccess:t=>e(t),onError:t=>r(t)})})}catch(t){console.log("Fetching Tags Error",t)}let{tags:{artist:n,album:a,title:l,track:i,picture:s}={}}=r;if(null==s?void 0:s.data){let t=new Uint8Array(null==s?void 0:s.data),r=new Blob([t],{type:null==s?void 0:s.format});e=URL.createObjectURL(r)}return{file:t,track:null!=i?i:0,artist:h(n)?n:"Unknown Artist",album:h(a)?a:"Unknown Album",title:h(l)?l:t.name,albumArtUrl:e}}async function m(t){let e=[];for(let r of Array.from(t))r.type.includes("audio")&&e.push(j(r));let r=await Promise.all(e);return r.reduce((t,e)=>(t.push({...e,id:(0,p.Z)()}),t),[])}async function f(t){let e;try{e=await y(t),console.log(e)}catch(t){console.log(t)}let r=await m(e);return r}let v=(t,e,r)=>{let n=Array.from(t),[a]=n.splice(e,1);return n.splice(r,0,a),n};async function x(){let t=await f({extensions:".mp3, .m4a, .flac, .wav, .aac"});s.jt.addTracks(t)}async function g(){let t=await f({extensions:".mp3, .wav, .aac",allowDirectory:!0});s.jt.addTracks(t)}let k=t=>{let{isDragging:e,currentPlaying:r}=t;return"draggable ".concat(e?"isDragging":""," ").concat(r?"currentTrack":"")},b=t=>{let{toggleMenu:e,fileReaderCopy:r,tracks:l}=t,[c,d]=a.useState(null),[u,p]=a.useState(null),y=t=>{d(t)},h=(t,e)=>{t.preventDefault(),p(e)},j=(t,e)=>{t.preventDefault(),null!==c&&c!==e&&function(t,e){let r=s.jt.state.currentTrackIndex,n=v(s.jt.state.tracks,t,e);t===r?s.jt.setCurrentTrack(e):e===r?t<r?s.jt.setCurrentTrack(r-1):s.jt.setCurrentTrack(e?r+1:1):t>r&&r>e?s.jt.setCurrentTrack(r+1):t<r&&r<e&&s.jt.setCurrentTrack(r-1),s.jt.setNewTrackOrder(n)}(c,e),d(null),p(null)},m=()=>{d(null),p(null)};return(0,n.jsxs)(i.u,{header:r.header,children:[(0,n.jsxs)("div",{className:o().playlistWrapper,children:[(0,n.jsx)(w,{}),(0,n.jsx)("div",{className:o().playlistEditor,children:(0,n.jsx)("div",{children:l.map((t,e)=>{let{artist:r,album:a,title:l,id:i}=t;return(0,n.jsxs)("div",{draggable:!0,onDragStart:()=>y(e),onDragOver:t=>h(t,e),onDrop:t=>j(t,e),onDragEnd:m,className:k({isDragging:c===e,currentPlaying:!1}),children:[(0,n.jsx)("div",{children:e+1}),(0,n.jsx)("div",{children:l}),(0,n.jsx)("div",{children:r}),(0,n.jsx)("div",{children:a}),(0,n.jsx)("button",{className:"icon-button",type:"button",children:"â–µ"})]},i)})})})]}),(0,n.jsxs)("div",{className:o().editorControlButtons,children:[(0,n.jsx)("button",{className:o().saturnButton,onClick:()=>g(),children:"Add a directory"}),(0,n.jsx)("button",{className:o().saturnButton,type:"button",onClick:()=>x(),children:"Add file(s)"})]}),(0,n.jsx)("div",{style:{marginTop:"auto"},children:(0,n.jsx)("button",{className:o().saturnButton,type:"button",onClick:e,children:"Exit"})})]})},w=()=>{let{playlist:t}=(0,l.TE)();return(0,n.jsxs)("div",{className:o().playlistHeaderWrapper,children:[(0,n.jsx)("div",{children:t.number}),(0,n.jsx)("div",{children:t.title}),(0,n.jsx)("div",{children:t.artist}),(0,n.jsx)("div",{children:t.album}),(0,n.jsx)("div",{})]})};var _=function(t){let{toggleMenu:e}=t,{tracks:r}=(0,s.AE)(),{fileReader:a}=(0,l.TE)();return(0,n.jsx)(b,{toggleMenu:e,fileReaderCopy:a,tracks:r})}},999:function(t){t.exports={editorControlButtons:"FileReader_editorControlButtons__PXzOJ",playlistWrapper:"FileReader_playlistWrapper__2IsEE",playlistHeaderWrapper:"FileReader_playlistHeaderWrapper__TRmQI",playlistEditor:"FileReader_playlistEditor__3lHt9",saturnButton:"FileReader_saturnButton__ry2JL"}}}]);