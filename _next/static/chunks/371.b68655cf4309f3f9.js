(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[371],{371:function(t,e,i){"use strict";i.r(e),i.d(e,{Starfield:function(){return u},default:function(){return f}});var s=i(5893),n=i(7294),r=i(9477),a=i(6696),h=i(7836),o=class{setDimensions(){let t=(0,a.$4)(),e=window.innerHeight;return this.width=t,this.height=e,[t,e]}onResize(){this.setDimensions(),this.camera.aspect=this.width/this.height,this.camera.updateProjectionMatrix(),this.renderer.setSize(this.width,this.height)}setupScene(){let t=new r.Ox3(16777215,3),e=new r.Ox3(16777215,2),i=new r.Ox3(16777215,2),s=new r.cPb(70,this.width/this.height,.1,1e3);t.position.set(-10,46,600),e.position.set(-200,46,500),i.position.set(200,46,500),this.scene.add(t,e,i),s.position.z=500,this.camera=s,this.addStars()}start(){this.rafId||(this.clock.getDelta(),this.rafId=window.requestAnimationFrame(this.animate.bind(this)))}stop(){this.rafId&&(window.cancelAnimationFrame(this.rafId),this.rafId=null)}setVisible(t){this._visible=t,t?this.start():this.stop()}animate(){if(!this._visible){this.rafId=null;return}let t=this.clock.getDelta();this.animateStars(t),this.animateSpaceship(),this.renderer.render(this.scene,this.camera),this.rafId=window.requestAnimationFrame(this.animate.bind(this))}animateSpaceship(){this.spaceship&&(this.spaceship.visible=this.shouldShowSpaceship,this.shouldShowSpaceship&&(this.spaceship.rotateZ(.01),this.spaceship.position.z-=.045,this.spaceship.position.z<400&&(this.spaceship.position.z=0)))}animateStars(t){for(let e=0;e<this.stars.length;e+=1){let i=this.stars[e];if(!i)return;if(this.stars[e].position.z+=(75+3*e)*t,i.position.z>550){let[t,e]=(0,a.r9)(this.width,this.height);i.position.z=-1e3,i.position.x=t,i.position.y=e}}}addStars(){let t=new r.vBJ({color:7707903}),e=new r.vBJ({color:16741754}),i=new r.vBJ({color:15589691}),s=new r.vBJ({color:16777215}),n=new r.u9r,h=new Float32Array([-1,-1,1,1,-1,1,1,1,1,1,1,1,-1,1,1,-1,-1,1]);n.setAttribute("position",new r.TlE(h,3));for(let h=-800;h<800;h+=10){let o=s;h>0&&h<100?o=e:h>100&&h<200?o=i:h>200&&h<300&&(o=t);let l=new r.Kj0(n,o),[d,p]=(0,a.r9)(this.width,this.height);l.position.x=d,l.position.y=p,l.position.z=h;let c=(0,a.ht)(),u=c<.5?.5:c;l.scale.set(u,u,u),this.scene.add(l),this.stars.push(l)}}constructor(){this.stars=[],this._visible=!0,this.setupSpaceship=()=>{let t=new h.E;t.load("../models/saturn_v1.gltf",t=>{var e;let{scene:i}=t,[s,n,a]=[2.5,-3.5,510];i.position.set(s,n,a),i.rotateZ(3.5),i.rotateY(Math.PI),i.visible=!1;let h=null===(e=i.children[1].material)||void 0===e?void 0:e.map;h.magFilter=r.wem,h.minFilter=r.wem,h.generateMipmaps=!1,this.spaceship=i,this.scene.add(i)})},this.toggleSpaceShipVisbility=t=>{this.shouldShowSpaceship=t,!this.spaceship&&t&&this.setupSpaceship()},this.setDimensions(),this.scene=new r.xsS,this.clock=new r.SUY,this.renderer=new r.CP7({alpha:!0,antialias:!1}),this.domElement=this.renderer.domElement,this.renderer.setPixelRatio(.75),this.renderer.setSize(this.width,this.height),this.debouncedResize=null,window.addEventListener("resize",()=>{clearTimeout(this.debouncedResize),this.debouncedResize=window.setTimeout(this.onResize.bind(this),250)}),window.addEventListener("orientationchange",()=>{this.onResize()}),this.setupScene(),this.start()}},l=i(3375),d=i.n(l),p=i(6010);let c=(t,e)=>{let i=n.useRef(null),[s,r]=n.useState(!1);return n.useEffect(()=>{var e;let s=new o;i.current=s,null==t||null===(e=t.current)||void 0===e||e.appendChild(s.domElement),r(!0);let n=()=>{document.hidden?s.stop():s.start()};return document.addEventListener("visibilitychange",n),()=>{document.removeEventListener("visibilitychange",n)}},[]),n.useEffect(()=>{var t;null===(t=i.current)||void 0===t||t.toggleSpaceShipVisbility(e)},[e]),s},u=t=>{let{isUiHidden:e}=t,i=n.useRef(),r=c(i,e);return(0,s.jsx)("div",{ref:i,className:(0,p.Z)(d().wrapper,{[d().fadeIn]:r})})};var f=u},6696:function(t,e,i){"use strict";i.d(e,{$4:function(){return a},GE:function(){return c},P2:function(){return p},Q4:function(){return d},TE:function(){return u},ht:function(){return o},mr:function(){return h},r9:function(){return l}});var s=i(9477);i(6194);let n=["ja-JP","ja"],r=null,a=()=>{let t=window.innerWidth,e=1.3333*window.innerHeight,i=e>t?t:e;return i!==r&&(r=i,document.documentElement.style.setProperty("--scene-width","".concat(i,"px"))),i},h=t=>{let e=Math.trunc(t/60).toString().padStart(2,"0"),i=Math.trunc(t%60).toString().padStart(2,"0");return"".concat(e,":").concat(i)},o=()=>2*Math.random()+1,l=(t,e)=>{let i=t=>{let e=Math.random()*(t-30)+30;return .5>Math.random()?e:-e};return[i(t),i(e)]},d=t=>{let e=Math.log(1);return Math.exp(e+(Math.log(142)-e)/100*(t-0))},p=function(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=0;return s=>{let n=new Date;n-i>=e&&(t(s),i=n)}};function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:23,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:40,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:19;t.wrapS=s.rpg,t.wrapT=s.rpg,t.repeat.set(1/e,1/n);let r=0,a=0;this.update=s=>{for(r+=s;r>i;){r-=i,(a+=1)>419&&(a=0);let s=a%e,h=Math.floor(a/e);t.offset.y=1-h/n-1/n,t.offset.x=s/e}}}let u=function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:navigator.language;return n.includes(t)?{intro:{},menu:{disc:"プレイリスト",settings:"ユーザー設定",hide:"パネル消去",skipBackwards:"曲戻し",skipForwards:"曲送り",play:"再生",pause:"一時停止",repeat:"リピート",repeatOne:"1曲",repeatAll:"全曲",repeatOff:"解除",stop:"停  止",advanced:"機能切り替え",exit:""},fileReader:{header:"Edit Playlist",helpText:"",exit:"",directory:"",files:""},playlist:{number:"#",title:"title",artist:"artist",album:"album"}}:{menu:{disc:"Edit Playlist",settings:"Coming Soon",hide:"Hide",skipBackwards:"Skip Backwards",skipForwards:"Skip Forwards",play:"Play",pause:"Pause",repeat:"Repeat",repeatOne:"1",repeatAll:"All",repeatOff:"Off",stop:"Stop",advanced:"About",exit:""},fileReader:{header:"Edit Playlist",helpText:"",exit:"",directory:"",files:""},playlist:{number:"#",title:"title",artist:"artist",album:"album"}}}},3375:function(t){t.exports={wrapper:"Starfield_wrapper__zQvE9",fadeIn:"Starfield_fadeIn__7cCZf"}}}]);